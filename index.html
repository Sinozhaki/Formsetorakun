<!DOCTYPE html><html lang="id"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Form New Account | Sewa by Zen</title><script src="https://cdn.tailwindcss.com"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" /><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"><style>body{margin:0;background-color:#0a0a0a;font-family:'Inter',sans-serif;}#fairy-lights-canvas{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1;pointer-events:none;}.fog-container{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:0;}.fog{position:absolute;background:rgba(179,137,255,0.4);border-radius:50%;filter:blur(100px);opacity:0;animation:drift linear infinite alternate;}.fog-1{width:400px;height:400px;bottom:-200px;left:10%;animation-duration:45s;animation-delay:-5s;}.fog-2{width:500px;height:500px;top:-250px;right:15%;animation-duration:60s;}.fog-3{width:300px;height:300px;bottom:-150px;right:-10%;animation-duration:75s;animation-delay:-15s;}@keyframes drift{0%{transform:translateX(-150px) translateY(20px) scale(0.9);opacity:0;}50%{opacity:0.2;}100%{transform:translateX(150px) translateY(-20px) scale(1.1);opacity:0;}}.form-input{background-color:rgba(17,24,39,0.5);border:1px solid rgba(255,255,255,0.1);color:white;transition:all 0.3s ease;}.form-input:focus{background-color:rgba(17,24,39,0.8);border-color:#a78bfa;box-shadow:0 0 0 2px #a78bfa;outline:none;}.form-input::placeholder{color:#6b7280;}.form-input:read-only{background-color:rgba(55,65,81,0.5);cursor:not-allowed;border-color:rgba(255,255,255,0.05);}.form-select{-webkit-appearance:none;-moz-appearance:none;appearance:none;}#main-content{padding-top:3rem;padding-bottom:3rem;}@media (min-width:640px){#main-content{justify-content:center;}}.toggle-switch{width:56px;height:32px;background-color:#ef4444;border-radius:9999px;position:relative;cursor:pointer;transition:background-color 0.3s;pointer-events:all;}.toggle-switch:after{content:'';position:absolute;top:4px;left:4px;width:24px;height:24px;background-color:white;border-radius:9999px;transition:transform 0.3s;}.toggle-switch.on{background-color:#10b981;}.toggle-switch.on:after{transform:translateX(24px);}}</style></head><body class="bg-gray-900"><div class="fog-container"><div class="fog fog-1"></div><div class="fog fog-2"></div><div class="fog fog-3"></div></div><canvas id="fairy-lights-canvas"></canvas><div id="welcome-screen" class="fixed inset-0 z-40 flex flex-col items-center justify-center bg-black/80 backdrop-blur-md transition-opacity duration-700 ease-in-out"><div class="text-center text-white p-8 bg-gray-900/50 rounded-2xl border border-purple-500/30 shadow-2xl shadow-purple-900/50"><h1 class="text-4xl font-light tracking-widest text-purple-300">Selamat Datang</h1><p class="text-gray-400 mt-2 text-lg">di Laman Sewa by Zen</p><button id="continue-btn" class="mt-8 px-10 py-3 bg-purple-600/70 border border-purple-400 rounded-full text-lg font-semibold text-white hover:bg-purple-700 transition-all duration-300 transform hover:scale-[1.02] shadow-lg shadow-purple-900/80 focus:outline-none focus:ring-4 focus:ring-purple-500/50">Lanjutkan</button></div></div><div id="main-content" class="relative z-20 w-full min-h-screen overflow-y-auto flex flex-col items-center justify-start py-12 px-4 opacity-0 pointer-events-none transition-opacity duration-700 ease-in-out"><div class="w-full max-w-md mx-auto p-6 bg-gray-800/60 backdrop-blur-sm rounded-2xl border border-gray-700/50 shadow-2xl shadow-black/50"><header class="text-center mb-6"><h1 class="text-3xl font-light text-white tracking-widest uppercase">Form New Acc</h1><p class="text-sm text-gray-400 mt-2 max-w-sm mx-auto">Pastikan data diisi dengan benar dan memenuhi persyaratan yang berlaku.</p><div class="w-16 h-0.5 mt-4 mx-auto bg-purple-500 rounded-full"></div></header><div id="fixed-status-control" class="mb-6 mx-auto w-32 p-3 flex items-center justify-center rounded-xl bg-gray-900/70 border border-purple-500/30 shadow-2xl backdrop-blur-sm transition-opacity duration-300 opacity-100 pointer-events-all"><div id="toggle-indicator" class="toggle-switch flex-shrink-0"></div></div><div id="content-container"><form id="new-acc-form" class="space-y-6"><fieldset id="form-fieldset" class="space-y-6 transition-opacity duration-500"><legend class="sr-only">Formulir Pendaftaran</legend><div><div class="flex items-center gap-2 mb-2"><i class="fa-solid fa-envelope text-purple-400 w-4 text-center"></i><label for="email" class="block text-sm font-medium text-gray-300">Email</label></div><input type="email" id="email" class="form-input block w-full rounded-lg p-3" placeholder="contoh@email.com" required></div><div><div class="flex items-center gap-2 mb-2"><i class="fa-solid fa-lock text-purple-400 w-4 text-center"></i><label for="password" class="block text-sm font-medium text-gray-300">Password</label></div><input type="password" id="password" class="form-input block w-full rounded-lg p-3" placeholder="••••••••" required></div><div class="grid grid-cols-2 gap-4"><div><div class="flex items-center gap-2 mb-2"><i class="fa-solid fa-users text-purple-400 w-4 text-center"></i><label for="koneksi" class="block text-sm font-medium text-gray-300">Koneksi</label></div><input type="number" id="koneksi" class="form-input block w-full rounded-lg p-3" placeholder="Minimal 20" required><p class="text-xs text-gray-500 mt-1 italic">Min. 20 koneksi untuk mendaftar.</p></div><div><div class="flex items-center gap-2 mb-2"><i class="fa-solid fa-calendar-days text-purple-400 w-4 text-center"></i><label for="tahun" class="block text-sm font-medium text-gray-300">Tahun Akun</label></div><div class="relative"><select id="tahun" class="form-input form-select block w-full rounded-lg p-3 pr-8" required><option selected disabled value="">Pilih...</option><option value="2024">2024</option><option value="2023">2023</option><option value="2022">2022</option><option value="2021">2021</option><option value="2020">2020</option><option value="2019">2019</option><option value="2018">2018</option><option value="2017">2017</option><option value="2016">2016</option><option value="2015">2015</option></select><div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-400"><i class="fa-solid fa-chevron-down text-xs"></i></div></div></div></div><div><div class="flex items-center gap-2 mb-2"><i class="fa-solid fa-hashtag text-purple-400 w-4 text-center"></i><label for="kode" class="block text-sm font-medium text-gray-300">Kode Unik</label></div><input type="text" id="kode" class="form-input block w-full rounded-lg p-3" value="7777" readonly><p class="text-xs text-gray-500 mt-1 italic">Kode ini akan dikirimkan bersama formulir.</p></div><div class="pt-4"><button type="submit" class="w-full flex items-center justify-center gap-3 px-5 py-3 text-base font-medium text-center text-white bg-green-600 rounded-xl hover:bg-green-700 focus:ring-4 focus:ring-green-900 transition-all duration-300 transform hover:scale-[1.01] shadow-lg shadow-green-900/50"><i class="fa-brands fa-whatsapp text-xl"></i>Kirim ke WhatsApp Admin</button></div></fieldset></form></div></div></div><div id="popup-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center bg-black/60 backdrop-blur-sm"><div class="bg-gray-800 border border-purple-500/50 rounded-2xl shadow-2xl p-6 text-center w-full max-w-sm mx-4 transform transition-all duration-300 scale-95 opacity-0" id="modal-box"><div class="w-16 h-16 mx-auto flex items-center justify-center bg-purple-500/20 rounded-full mb-4"><i id="popup-icon" class="fa-solid fa-triangle-exclamation text-4xl text-purple-400"></i></div><h3 id="popup-title" class="text-xl font-bold text-white mb-2">Perhatian!</h3><p id="popup-message" class="text-gray-300"></p><input type="password" id="admin-password-input" class="form-input text-center block w-full rounded-lg p-3 mt-4 hidden" placeholder="Masukkan Sandi Admin"><button id="password-confirm-btn" class="mt-6 w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md hidden">Konfirmasi Sandi</button><button id="close-popup" class="mt-6 w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md">Mengerti</button></div></div><audio id="audio-dialog" src="dialog.mp3" preload="auto"></audio><audio id="audio-click" src="klik.mp3" preload="auto"></audio><script>document.addEventListener('DOMContentLoaded',function(){const BIN_ID='68ef0955ae596e708f143dc8';const API_KEY='$2a$10$CyEgkHrw6xtwHt.RE3ZqEulgvcK5yzSmlYJmn.aRA23csA9a8u/.2';const ADMIN_PASSWORD='15082003';const READ_API_URL=`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`;const UPDATE_API_URL=`https://api.jsonbin.io/v3/b/${BIN_ID}`;const MAX_RETRIES=3;const canvas=document.getElementById('fairy-lights-canvas');const ctx=canvas.getContext('2d');const welcomeScreen=document.getElementById('welcome-screen');const continueBtn=document.getElementById('continue-btn');const mainContent=document.getElementById('main-content');const audioDialog=document.getElementById('audio-dialog');const audioClick=document.getElementById('audio-click');const form=document.getElementById('new-acc-form');const koneksiInput=document.getElementById('koneksi');const formFieldset=document.getElementById('form-fieldset');const toggleIndicator=document.getElementById('toggle-indicator');const fixedStatusControl=document.getElementById('fixed-status-control');const popupModal=document.getElementById('popup-modal');const modalBox=document.getElementById('modal-box');const popupMessage=document.getElementById('popup-message');const closePopupButton=document.getElementById('close-popup');const passwordInput=document.getElementById('admin-password-input');const passwordConfirmBtn=document.getElementById('password-confirm-btn');let particlesArray;let currentFormStatus=false;let pendingNewStatus=false;function showPopup(message,isError=false){const popupTitle=document.getElementById('popup-title');const popupIcon=document.getElementById('popup-icon');popupMessage.textContent=message;if(isError){popupTitle.textContent="Error Jaringan!";popupIcon.className='fa-solid fa-wifi text-4xl text-red-400';}else{popupTitle.textContent="Perhatian!";popupIcon.className='fa-solid fa-triangle-exclamation text-4xl text-purple-400';}passwordInput.classList.add('hidden');passwordConfirmBtn.classList.add('hidden');closePopupButton.classList.remove('hidden');popupModal.classList.remove('hidden');setTimeout(()=>{modalBox.classList.remove('scale-95','opacity-0');},10);}function hidePopup(){modalBox.classList.add('scale-95','opacity-0');setTimeout(()=>{popupModal.classList.add('hidden');},300);}closePopupButton.addEventListener('click',hidePopup);function setCanvasSize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}setCanvasSize();const colors=['#ffadad','#ffd6a5','#fdffb6','#caffbf','#9bf6ff','#a0c4ff','#bdb2ff','#ffc6ff'];class Particle{constructor(){this.x=Math.random()*canvas.width;this.y=Math.random()*canvas.height;this.size=Math.random()*2+1;this.speedX=Math.random()*0.8-0.4;this.speedY=Math.random()*0.8-0.4;this.color=colors[Math.floor(Math.random()*colors.length)];this.baseAngle=Math.random()*360;this.angle=this.baseAngle;this.angleSpeed=Math.random()*0.02-0.01;}update(){this.angle+=this.angleSpeed;this.x+=Math.sin(this.angle)*0.4+this.speedX;this.y+=Math.cos(this.angle)*0.4+this.speedY;if(this.x<0)this.x=canvas.width;if(this.x>canvas.width)this.x=0;if(this.y<0)this.y=canvas.height;if(this.y>canvas.height)this.y=0;}draw(){ctx.fillStyle=this.color;ctx.beginPath();ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.closePath();ctx.shadowBlur=10;ctx.shadowColor=this.color;ctx.fill();ctx.shadowBlur=0;}}function init(){particlesArray=[];const numberOfParticles=(canvas.width*canvas.height)/10000;for(let i=0;i<numberOfParticles;i++){particlesArray.push(new Particle());}}init();function animate(){ctx.clearRect(0,0,canvas.width,canvas.height);for(let i=0;i<particlesArray.length;i++){particlesArray[i].update();particlesArray[i].draw();}requestAnimationFrame(animate);}function playClickSound(){audioClick.currentTime=0;audioClick.play().catch(error=>console.log("Error playing click sound:",error));}function updateFormState(isActive,isInitialLoad=true){currentFormStatus=isActive;formFieldset.disabled=!isActive;if(isActive){toggleIndicator.classList.add('on');formFieldset.style.opacity='1';}else{toggleIndicator.classList.remove('on');formFieldset.style.opacity='0.5';}}async function fetchStatusWithRetry(){updateFormState(false,true);fixedStatusControl.style.opacity='0.5';for(let attempt=0;attempt<MAX_RETRIES;attempt++){try{const response=await fetch(READ_API_URL,{headers:{'X-Master-Key':API_KEY,'Accept':'application/json'}});if(!response.ok){if(response.status>=400&&response.status<500){throw new Error(`Client error: ${response.status}`);}throw new Error(`HTTP error! Status: ${response.status}`);}const data=await response.json();const isEnabled=data.record?.is_submission_enabled;const isActive=isEnabled===true;updateFormState(isActive,true);fixedStatusControl.style.opacity='1';return;}catch(error){if(attempt===MAX_RETRIES-1){console.error("Gagal mengambil status:",error);updateFormState(false,true);showPopup(`Gagal mengambil status dari server. Form dinonaktifkan.`,true);}else{const delay=Math.pow(2,attempt)*1000;await new Promise(resolve=>setTimeout(resolve,delay));}}}}async function updateStatusOnAPI(newStatus){fixedStatusControl.style.opacity='0.3';toggleIndicator.style.pointerEvents='none';formFieldset.style.opacity='0.3';const payload={is_submission_enabled:newStatus};try{const response=await fetch(UPDATE_API_URL,{method:'PUT',headers:{'Content-Type':'application/json','X-Master-Key':API_KEY,'X-Bin-Versioning':'false'},body:JSON.stringify(payload)});if(!response.ok){throw new Error(`Gagal menyimpan: Status HTTP ${response.status}`);}updateFormState(newStatus,false);showPopup(`Status pendaftaran berhasil diubah menjadi: ${newStatus?'BUKA':'TUTUP'}`,false);}catch(error){console.error("Error saat update API:",error);updateFormState(currentFormStatus,false);showPopup(`Gagal mengubah status server: ${error.message}`,true);}finally{toggleIndicator.style.pointerEvents='all';fixedStatusControl.style.opacity='1';}}function showPasswordPrompt(newStatus){pendingNewStatus=newStatus;document.getElementById('popup-title').textContent="Konfirmasi Admin";document.getElementById('popup-icon').className='fa-solid fa-key text-4xl text-purple-400';popupMessage.textContent="Masukkan sandi rahasia untuk mengubah status pendaftaran:";passwordInput.value='';passwordInput.classList.remove('hidden');passwordConfirmBtn.classList.remove('hidden');closePopupButton.classList.add('hidden');passwordInput.classList.remove('border-red-500');popupModal.classList.remove('hidden');setTimeout(()=>{modalBox.classList.remove('scale-95','opacity-0');},10);}function hidePasswordPrompt(success=true){passwordInput.classList.add('hidden');passwordConfirmBtn.classList.add('hidden');closePopupButton.classList.remove('hidden');if(success)hidePopup();}passwordConfirmBtn.addEventListener('click',()=>{playClickSound();const enteredPassword=passwordInput.value;if(enteredPassword===ADMIN_PASSWORD){hidePasswordPrompt();updateStatusOnAPI(pendingNewStatus);}else{passwordInput.value='';popupMessage.textContent="Sandi Salah! Pendaftaran tidak diubah. Coba lagi atau tekan Mengerti untuk menutup.";passwordInput.classList.add('border-red-500');passwordConfirmBtn.classList.add('hidden');closePopupButton.classList.remove('hidden');}});continueBtn.addEventListener('click',()=>{audioDialog.play().catch(error=>console.log("Autoplay dialog ditolak oleh browser."));welcomeScreen.classList.add('opacity-0');mainContent.classList.remove('pointer-events-none');setTimeout(()=>{mainContent.classList.remove('opacity-0');welcomeScreen.classList.add('hidden');},700);});toggleIndicator.addEventListener('click',()=>{playClickSound();const newStatus=!currentFormStatus;showPasswordPrompt(newStatus);});if(form){form.addEventListener('submit',e=>{e.preventDefault();if(formFieldset.disabled){showPopup("Maaf, pendaftaran sedang ditutup oleh Admin. Harap coba lagi nanti.",false);return;}const email=document.getElementById('email').value;const password=document.getElementById('password').value;const koneksi=koneksiInput.value;const tahun=document.getElementById('tahun').value;const kode=document.getElementById('kode').value;if(parseInt(koneksi)<20){showPopup('Koneksi minimal harus 20. Harap perbarui jumlah Koneksi.');return;}if(tahun===""){showPopup("Harap pilih Tahun Akun sebelum melanjutkan.");return;}const message=`*New Account Form*%0A%0A`+`*Email*: ${email}%0A`+`*Password*: ${password}%0A`+`*Connections*: ${koneksi}%0A`+`*Account Year*: ${tahun}%0A`+`*Code*: ${kode}`;const whatsappURL=`https://wa.me/16823134027?text=${message}`;window.open(whatsappURL,'_blank');});}else{console.error("Error: Formulir dengan ID 'new-acc-form' tidak ditemukan.");}document.querySelectorAll('button, select').forEach(element=>{element.addEventListener('click',playClickSound);});fetchStatusWithRetry();animate();window.addEventListener('resize',()=>{setCanvasSize();init();});});</script></body></html>
